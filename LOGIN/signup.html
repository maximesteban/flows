<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Crear Cuenta - SocialApp</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <script>
        tailwind.config = {
            theme: {
                extend: {
                    colors: {
                        'bg-primary': '#FBF8F3',
                        'text-primary': '#000122',
                        'text-secondary': '#6C6051',
                        'btn-inactive': '#C6B7A4',
                        'btn-active': '#635FE5'
                    }
                }
            }
        }
    </script>
</head>
<body class="bg-bg-primary min-h-screen flex flex-col justify-center items-center p-4">
      
        <!-- Logo Header -->
        <div class="mb-8">
            <img src="../img/logo-icon.png" alt="PlaceNet Logo" class="h-16 w-auto mx-auto">
        </div>

            <!-- Step Info -->
            <div class="text-center mb-8">
                <h2 class="text-3xl font-bold text-text-primary mb-2">¡Hola!</h2>
                <p class="text-text-secondary mb-3">Cuéntanos un poco sobre ti</p>
                <span class="inline-block bg-gray-100 text-text-secondary px-3 py-1 rounded-full text-xs font-medium">
                    Paso 1 de 4
                </span>
            </div>
            
            <!-- Form -->
            <form id="signupForm" class="space-y-6 px-6">
                <div class="space-y-2">
                    <label for="firstName" class="block text-sm font-medium text-text-primary">Nombre *</label>
                    <input 
                        type="text" 
                        id="firstName" 
                        placeholder="Tu nombre" 
                        required
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-btn-active focus:outline-none transition-colors"
                    >
                    <div class="field-error hidden text-xs text-red-500 mt-1"></div>
                </div>
                
                <div class="space-y-2">
                    <label for="lastName" class="block text-sm font-medium text-text-primary">Apellidos *</label>
                    <input 
                        type="text" 
                        id="lastName" 
                        placeholder="Tus apellidos" 
                        required
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-btn-active focus:outline-none transition-colors"
                    >
                    <div class="field-error hidden text-xs text-red-500 mt-1"></div>
                </div>
                
                <div class="space-y-2">
                    <label for="birthDate" class="block text-sm font-medium text-text-primary">Fecha de nacimiento *</label>
                    <input 
                        type="date" 
                        id="birthDate" 
                        required
                        class="w-full px-4 py-3 border-2 border-gray-200 rounded-lg focus:border-btn-active focus:outline-none transition-colors"
                    >
                    <small class="text-xs text-text-secondary">Debes tener al menos 16 años para registrarte</small>
                    <div class="field-error hidden text-xs text-red-500 mt-1"></div>
                </div>
                
               
                
                
                
                <button 
                    type="submit" 
                    id="submitBtn"
                    disabled
                    class="w-full bg-btn-inactive text-white py-3 px-6 rounded-lg font-semibold transition-all duration-200 disabled:opacity-50 disabled:cursor-not-allowed"
                >
                    Continuar
                </button>
            </form>
        </div>

    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const form = document.getElementById('signupForm');
            const firstNameInput = document.getElementById('firstName');
            const lastNameInput = document.getElementById('lastName');
            const birthDateInput = document.getElementById('birthDate');
            const submitBtn = document.getElementById('submitBtn');

            // Set max date to 16 years ago
            const today = new Date();
            const maxDate = new Date(today.getFullYear() - 16, today.getMonth(), today.getDate());
            birthDateInput.max = maxDate.toISOString().split('T')[0];

            // Real-time validation
            firstNameInput.addEventListener('input', () => {
                validateName(firstNameInput);
                checkFormValidity();
            });
            lastNameInput.addEventListener('input', () => {
                validateName(lastNameInput);
                checkFormValidity();
            });
            birthDateInput.addEventListener('change', () => {
                validateAge();
                checkFormValidity();
            });

            function validateName(field) {
                const value = field.value.trim();
                const errorDiv = field.parentNode.querySelector('.field-error');
                
                // Clear previous styles
                field.classList.remove('border-red-500', 'border-green-500', 'bg-red-50', 'bg-green-50');
                errorDiv.classList.add('hidden');
                
                if (value.length === 0) {
                    return true; // Don't show error for empty field initially
                }
                
                if (value.length < 2) {
                    showFieldError(field, 'Debe tener al menos 2 caracteres');
                    return false;
                }
                
                if (!/^[a-zA-ZáéíóúÁÉÍÓÚñÑüÜ\s]+$/.test(value)) {
                    showFieldError(field, 'Solo se permiten letras y espacios');
                    return false;
                }
                
                showFieldSuccess(field);
                return true;
            }

            function validateAge() {
                const birthDate = new Date(birthDateInput.value);
                const today = new Date();
                let age = today.getFullYear() - birthDate.getFullYear();
                const monthDiff = today.getMonth() - birthDate.getMonth();
                
                const errorDiv = birthDateInput.parentNode.querySelector('.field-error');
                birthDateInput.classList.remove('border-red-500', 'border-green-500', 'bg-red-50', 'bg-green-50');
                errorDiv.classList.add('hidden');
                
                if (monthDiff < 0 || (monthDiff === 0 && today.getDate() < birthDate.getDate())) {
                    age--;
                }
                
                if (!birthDateInput.value) {
                    return true;
                }
                
                if (age < 13) {
                    showFieldError(birthDateInput, 'Debes tener al menos 16 años para registrarte');
                    return false;
                }
                
                if (age > 120) {
                    showFieldError(birthDateInput, 'Por favor, introduce una fecha válida');
                    return false;
                }
                
                showFieldSuccess(birthDateInput);
                return true;
            }

            function showFieldError(field, message) {
                field.classList.add('border-red-500', 'bg-red-50');
                const errorDiv = field.parentNode.querySelector('.field-error');
                errorDiv.textContent = message;
                errorDiv.classList.remove('hidden');
            }

            function showFieldSuccess(field) {
                field.classList.add('border-green-500', 'bg-green-50');
            }

            function checkFormValidity() {
                const firstName = firstNameInput.value.trim();
                const lastName = lastNameInput.value.trim();
                const birthDate = birthDateInput.value;
                
                // Validate all fields properly
                const isFirstNameValid = firstName.length >= 2 && /^[a-zA-ZáéíóúÁÉÍÓÚñÑüÜ\s]+$/.test(firstName);
                const isLastNameValid = lastName.length >= 2 && /^[a-zA-ZáéíóúÁÉÍÓÚñÑüÜ\s]+$/.test(lastName);
                const isBirthDateValid = birthDate && validateAge();
                
                const isValid = isFirstNameValid && isLastNameValid && isBirthDateValid;
                
                if (isValid) {
                    submitBtn.disabled = false;
                    submitBtn.className = 'w-full bg-btn-active text-white py-3 px-6 rounded-lg font-semibold hover:bg-indigo-600 transition-all duration-200 transform hover:-translate-y-0.5 hover:shadow-lg cursor-pointer';
                } else {
                    submitBtn.disabled = true;
                    submitBtn.className = 'w-full bg-btn-inactive text-white py-3 px-6 rounded-lg font-semibold transition-all duration-200 cursor-not-allowed';
                }
            }

            // Form submission
            form.addEventListener('submit', function(e) {
                e.preventDefault();
                
                // Final validation
                const isFirstNameValid = validateName(firstNameInput);
                const isLastNameValid = validateName(lastNameInput);
                const isAgeValid = validateAge();
                
                if (!isFirstNameValid || !isLastNameValid || !isAgeValid) {
                    alert('Por favor, completa todos los campos correctamente');
                    return;
                }
                
                // Collect form data
                const formData = {
                    firstName: firstNameInput.value.trim(),
                    lastName: lastNameInput.value.trim(),
                    birthDate: birthDateInput.value,
                    gender: document.getElementById('gender').value,
                    phone: sessionStorage.getItem('phoneNumber')
                };
                
                // Store data for next step (integrate with your app's storage)
                sessionStorage.setItem('signupData', JSON.stringify(formData));
                
                console.log('Navigate to create avatar with data:', formData);
            });

            // Initialize form validation
            setTimeout(checkFormValidity, 100);
        });
    </script>
</body>
</html>